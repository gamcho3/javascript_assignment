<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>콜라자판기2</title>
  </head>
  <script>
     /**
     * 1. 콜라 자판기
     * - 콜라 객체를 만들어주세요.
     * - 콜라 객체는 이름, 가격, 재고를 가지고 있습니다.
     * - 콜라를 구매하는 buyCola 함수를 만들어주세요.
     * - buyCola 함수는 cost를 매개변수로 받습니다.
     * - 재고가 없을 경우 "재고가 부족합니다."를 경고창으로 띄워주세요. (alert함수 사용하기)
     * - 가격보다 돈이 적을 경우 "돈이 부족합니다."를 경고창으로 띄워주세요.
     * - 구매가 성공할 경우 "콜라를 구매하셨습니다. 거스름돈은 ?원 입니다."를 경고창으로 띄워주세요.
     * - 구매가 성공할 경우 콜라의 재고를 하나 줄여주세요.
     * - 심화 : vendingMachine객체를 만들어서 drinks 배열에 음료수 객체들을 넣고 buyDrink 메소드를 만들어주세요.
     * - buyDrink 메소드는 음료수 이름과 cost를 매개변수로 받습니다.
     * - 음료수의 재고확인 버튼을 만들어주세요.
     */
     const cola = {
      name : "콜라",
      price : 1000,
      stock: 5
     }
     const cider = {
      name:'사이다',
      price:1200,
      stock:4
     }
     const fanta = {
      name:'환타',
      price:1500,
      stock:2
     }

const vendingMachine = {
  drinks : [
    cola,cider,fanta
  ],
  buyDrink: function (drinkName,cost){
    console.log(drinkName,cost);
    for(let drink of this.drinks){
      console.log(drink);
      if(drink.name === drinkName){
        if(drink.stock === 0){
          alert("재고가 부족합니다.");
     
        }else if(cost < drink.price){
          alert("돈이 부족합니다.")
       
        }else{
          drink.stock--;
          alert(`${drink.name}를 구매하셨습니다. 거스름돈은 ${cost - drink.price}원 입니다.`)
         
          }
      }
 
    }
  }, // 메서드
  checkStock:function(){
    let drinks = "";
    let stocks = "";
    for(item of this.drinks){
      drinks += `${item.name} `;
      stocks += `${item.stock}개 `;
    }
    alert(`음료수 : ${drinks} , 재고 : ${stocks}`);
    return;
  }
}

  const buyCola = () =>{
    const cost  = Number(prompt("돈을 넣어주세요"));
    vendingMachine.buyDrink("콜라",cost);
  }
  const buyCider = () =>{
    const cost  = Number(prompt("돈을 넣어주세요"));
    vendingMachine.buyDrink("사이다",cost);
  }
  const buyFanta = () =>{
    const cost  = Number(prompt("돈을 넣어주세요"));
    vendingMachine.buyDrink("환타",cost);
  }



  </script>
  <body>
    <button type="button" onclick="buyCola()">콜라 뽑기</button>
    <button type="button" onclick="buyCider()">사이다 뽑기</button>
    <button type="button" onclick="buyFanta()">환타 뽑기</button>
    <button type="button" onclick="vendingMachine.checkStock()">재고 확인</button>
  </body>
</html>
